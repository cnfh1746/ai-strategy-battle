<div class="battle-settings-container" style="padding: 15px;">
    <h3 style="margin-top: 0;">🎮 AI策略对战 - 玩家配置</h3>
    
    <!-- 游戏模式选择 -->
    <div class="setting-group" style="margin-bottom: 20px; padding: 15px; background: var(--black30a); border-radius: 8px;">
        <label style="display: block; font-weight: bold; margin-bottom: 10px;">🎯 游戏模式</label>
        <select id="game_mode" class="text_pole" style="width: 100%;">
            <option value="werewolf">狼人杀（6人）</option>
            <option value="custom">自定义游戏（通过世界书定义规则）</option>
        </select>
        <small style="display: block; margin-top: 5px; color: #888;">选择游戏模式或自定义规则</small>
    </div>
    
    <!-- 世界书配置 -->
    <div class="setting-group" style="margin-bottom: 20px; padding: 15px; background: var(--black30a); border-radius: 8px;">
        <label style="display: block; font-weight: bold; margin-bottom: 10px;">📚 世界书名称（游戏规则）</label>
        <input type="text" id="worldbook_name" placeholder="例如：狼人杀规则" class="text_pole" style="width: 100%;">
        <small style="display: block; margin-top: 5px; color: #888;">在世界书中创建包含游戏名称的条目，系统将自动读取规则</small>
    </div>
    
    <!-- 6个AI配置 -->
    <div class="players-config">
        <!-- 玩家 1 -->
        <div class="ai-player-config" style="margin-bottom: 20px; padding: 15px; background: var(--black30a); border-radius: 8px;">
            <h4 style="margin-top: 0; color: var(--SmartThemeQuoteColor);">👤 玩家 1</h4>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">名称</label>
                <input type="text" id="player1_name" placeholder="AI-Alpha" class="text_pole" style="width: 100%;">
            </div>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">API URL（可选，留空使用默认OpenAI）</label>
                <input type="text" id="player1_api_url" placeholder="https://api.openai.com/v1" class="text_pole" style="width: 100%;">
            </div>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">API Key</label>
                <input type="password" id="player1_api_key" placeholder="sk-..." class="text_pole" style="width: 100%;">
            </div>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">模型</label>
                <input type="text" id="player1_model" placeholder="gpt-4" class="text_pole" style="width: 100%;">
            </div>
            <details style="margin-top: 10px;">
                <summary style="cursor: pointer; color: var(--SmartThemeBodyColor); font-weight: bold;">⚙️ 高级：自定义人格提示词（可选）</summary>
                <textarea id="player1_custom_prompt" class="text_pole" placeholder="例如：你性格谨慎，不轻易相信他人，喜欢从逻辑角度分析问题..." style="width: 100%; height: 80px; margin-top: 10px; resize: vertical;"></textarea>
            </details>
        </div>
        
        <!-- 玩家 2 -->
        <div class="ai-player-config" style="margin-bottom: 20px; padding: 15px; background: var(--black30a); border-radius: 8px;">
            <h4 style="margin-top: 0; color: var(--SmartThemeQuoteColor);">👤 玩家 2</h4>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">名称</label>
                <input type="text" id="player2_name" placeholder="AI-Beta" class="text_pole" style="width: 100%;">
            </div>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">API URL（可选，留空使用默认OpenAI）</label>
                <input type="text" id="player2_api_url" placeholder="https://api.openai.com/v1" class="text_pole" style="width: 100%;">
            </div>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">API Key</label>
                <input type="password" id="player2_api_key" placeholder="sk-..." class="text_pole" style="width: 100%;">
            </div>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">模型</label>
                <input type="text" id="player2_model" placeholder="gpt-4" class="text_pole" style="width: 100%;">
            </div>
            <details style="margin-top: 10px;">
                <summary style="cursor: pointer; color: var(--SmartThemeBodyColor); font-weight: bold;">⚙️ 高级：自定义人格提示词（可选）</summary>
                <textarea id="player2_custom_prompt" class="text_pole" placeholder="例如：你性格激进，喜欢主动出击，善于煽动情绪..." style="width: 100%; height: 80px; margin-top: 10px; resize: vertical;"></textarea>
            </details>
        </div>
        
        <!-- 玩家 3 -->
        <div class="ai-player-config" style="margin-bottom: 20px; padding: 15px; background: var(--black30a); border-radius: 8px;">
            <h4 style="margin-top: 0; color: var(--SmartThemeQuoteColor);">👤 玩家 3</h4>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">名称</label>
                <input type="text" id="player3_name" placeholder="AI-Gamma" class="text_pole" style="width: 100%;">
            </div>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">API URL（可选，留空使用默认OpenAI）</label>
                <input type="text" id="player3_api_url" placeholder="https://api.openai.com/v1" class="text_pole" style="width: 100%;">
            </div>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">API Key</label>
                <input type="password" id="player3_api_key" placeholder="sk-..." class="text_pole" style="width: 100%;">
            </div>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">模型</label>
                <input type="text" id="player3_model" placeholder="gpt-4" class="text_pole" style="width: 100%;">
            </div>
            <details style="margin-top: 10px;">
                <summary style="cursor: pointer; color: var(--SmartThemeBodyColor); font-weight: bold;">⚙️ 高级：自定义人格提示词（可选）</summary>
                <textarea id="player3_custom_prompt" class="text_pole" placeholder="例如：你是话痨型玩家，喜欢详细分析每个细节..." style="width: 100%; height: 80px; margin-top: 10px; resize: vertical;"></textarea>
            </details>
        </div>
        
        <!-- 玩家 4 -->
        <div class="ai-player-config" style="margin-bottom: 20px; padding: 15px; background: var(--black30a); border-radius: 8px;">
            <h4 style="margin-top: 0; color: var(--SmartThemeQuoteColor);">👤 玩家 4</h4>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">名称</label>
                <input type="text" id="player4_name" placeholder="AI-Delta" class="text_pole" style="width: 100%;">
            </div>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">API URL（可选，留空使用默认OpenAI）</label>
                <input type="text" id="player4_api_url" placeholder="https://api.openai.com/v1" class="text_pole" style="width: 100%;">
            </div>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">API Key</label>
                <input type="password" id="player4_api_key" placeholder="sk-..." class="text_pole" style="width: 100%;">
            </div>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">模型</label>
                <input type="text" id="player4_model" placeholder="gpt-4" class="text_pole" style="width: 100%;">
            </div>
            <details style="margin-top: 10px;">
                <summary style="cursor: pointer; color: var(--SmartThemeBodyColor); font-weight: bold;">⚙️ 高级：自定义人格提示词（可选）</summary>
                <textarea id="player4_custom_prompt" class="text_pole" placeholder="例如：你是沉默寡言型，只在关键时刻发言..." style="width: 100%; height: 80px; margin-top: 10px; resize: vertical;"></textarea>
            </details>
        </div>
        
        <!-- 玩家 5 -->
        <div class="ai-player-config" style="margin-bottom: 20px; padding: 15px; background: var(--black30a); border-radius: 8px;">
            <h4 style="margin-top: 0; color: var(--SmartThemeQuoteColor);">👤 玩家 5</h4>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">名称</label>
                <input type="text" id="player5_name" placeholder="AI-Echo" class="text_pole" style="width: 100%;">
            </div>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">API URL（可选，留空使用默认OpenAI）</label>
                <input type="text" id="player5_api_url" placeholder="https://api.openai.com/v1" class="text_pole" style="width: 100%;">
            </div>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">API Key</label>
                <input type="password" id="player5_api_key" placeholder="sk-..." class="text_pole" style="width: 100%;">
            </div>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">模型</label>
                <input type="text" id="player5_model" placeholder="gpt-4" class="text_pole" style="width: 100%;">
            </div>
            <details style="margin-top: 10px;">
                <summary style="cursor: pointer; color: var(--SmartThemeBodyColor); font-weight: bold;">⚙️ 高级：自定义人格提示词（可选）</summary>
                <textarea id="player5_custom_prompt" class="text_pole" placeholder="例如：你是随和型玩家，容易被说服..." style="width: 100%; height: 80px; margin-top: 10px; resize: vertical;"></textarea>
            </details>
        </div>
        
        <!-- 玩家 6 -->
        <div class="ai-player-config" style="margin-bottom: 20px; padding: 15px; background: var(--black30a); border-radius: 8px;">
            <h4 style="margin-top: 0; color: var(--SmartThemeQuoteColor);">👤 玩家 6</h4>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">名称</label>
                <input type="text" id="player6_name" placeholder="AI-Foxtrot" class="text_pole" style="width: 100%;">
            </div>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">API URL（可选，留空使用默认OpenAI）</label>
                <input type="text" id="player6_api_url" placeholder="https://api.openai.com/v1" class="text_pole" style="width: 100%;">
            </div>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">API Key</label>
                <input type="password" id="player6_api_key" placeholder="sk-..." class="text_pole" style="width: 100%;">
            </div>
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px;">模型</label>
                <input type="text" id="player6_model" placeholder="gpt-4" class="text_pole" style="width: 100%;">
            </div>
            <details style="margin-top: 10px;">
                <summary style="cursor: pointer; color: var(--SmartThemeBodyColor); font-weight: bold;">⚙️ 高级：自定义人格提示词（可选）</summary>
                <textarea id="player6_custom_prompt" class="text_pole" placeholder="例如：你是理性分析型，擅长通过投票模式找出狼人..." style="width: 100%; height: 80px; margin-top: 10px; resize: vertical;"></textarea>
            </details>
        </div>
    </div>
    
    <button id="save_battle_settings" class="menu_button" style="width: 100%; padding: 12px; font-size: 16px; margin-top: 10px;">💾 保存配置</button>
    
    <div style="margin-top: 20px; padding: 15px; background: var(--black50a); border-radius: 8px;">
        <h4 style="margin-top: 0;">📖 使用说明</h4>
        <ol style="margin: 0; padding-left: 20px; line-height: 1.8;">
            <li>选择游戏模式（狼人杀或自定义）</li>
            <li>配置6个AI的名称、API URL（可选）、API Key和模型</li>
            <li>（可选）为每个AI配置不同的人格特征</li>
            <li>在世界书中创建游戏规则（关键词与游戏模式对应）</li>
            <li>保存配置后，在聊天界面右侧会出现"AI对战控制台"</li>
            <li>点击"开始游戏"启动对战</li>
            <li>游戏会在每个阶段暂停，你可以采访AI了解其思考过程</li>
            <li>点击"继续游戏"推进游戏进程</li>
        </ol>
    </div>
</div>
