# 🚀 AI辅助全自动开发与验证工作流

这是一个带安全护栏的自动化开发流程，旨在确保代码质量、提高开发效率，并从根本上防止AI直接将代码改坏。

## 核心理念

- **小步快跑**: 每次只进行小范围、明确的修改，便于验证和回滚。
- **智能验证**: 放弃固定等待，采用轮询机制和多种点击策略，提高自动化流程的稳定性。
- **人工决策**: AI负责执行和验证，但最终的合并决策由您来做出。

---

## ⚠️ 技术注意事项

- **PowerShell语法**: 在执行命令行工具时，必须使用分号 (`;`) 来分隔连续的命令，而不是 `&&`。
  - **错误**: `cd my-dir && my-command`
  - **正确**: `cd my-dir; .\my-command`

---

## 📋 工作流步骤

### 第一部分：本地安全开发循环

1.  **👨‍💻 AI代码修改**
    *   **操作**: 根据具体任务修改项目文件 (如 `style.css`, `index.js` 等)。
    *   **原则**: 遵循“单一职责”原则，一次修改只解决一个问题。

3.  **🤖 自动代码质量检查 (Linting & Formatting)**
    *   **操作**: (可选，待配置) 自动执行代码格式化和静态检查工具 (如 Prettier, ESLint)。
    *   **目的**: 保证代码风格统一，提前捕获低级错误。

4.  **🚀 提交到远程分支**
    *   **操作**: 执行 `git add .`, `git commit -m "AI automated change"`，然后运行 `push.bat` 将新分支推送到远程仓库。
    *   **目的**: 备份代码，并为浏览器验证做准备。

### 第二部分：浏览器自动更新与验证循环

5.  **🎯 浏览器环境准备**
    *   **操作**:
        1.  `list_pages` - 获取所有打开的浏览器标签页。
        2.  `select_page` - 选中“酒馆”所在的标签页。

6.  **🔄 智能更新扩展 (增强版)**
    *   **操作**:
        1.  `take_snapshot` 获取当前页面元素。
        2.  `click` 点击 "Extensions" 按钮。
        3.  **轮询检查**: 启动循环，每隔2-3秒 `take_snapshot` 一次，直到在页面上找到 "AI策略对战" 扩展对应的 "Update" 按钮。
        4.  **可靠点击**: 使用 `evaluate_script` 执行 JavaScript (`element.click()`) 来点击 "Update" 按钮。
        5.  等待固定时间 (约10秒) 让更新完成。
        6.  `navigate_page` (type=reload) 刷新页面。

7.  **🧐 自动化效果验证**
    *   **操作**:
        1.  `take_snapshot` 检查UI元素是否符合预期。
        2.  `click` 或 `evaluate_script` 触发核心功能 (如打开面板、切换Tab)。
        3.  `take_screenshot` 截取关键界面以供分析。

8.  **📊 分析与决策**
    *   **AI汇报**: 我将向您展示最终的截图和代码变更摘要。
    *   **人工决策**:
        *   **满意**: 您确认后，我们继续进行下一个优化目标。
        *   **不满意**: 我将根据您的新反馈，启动下一次修复或优化循环。项目自带的存档点功能可以用于回滚。
