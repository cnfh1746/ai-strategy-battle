&lt;div class=&quot;battle-settings-container&quot; style=&quot;padding: 15px;&quot;&gt;
    &lt;h3 style=&quot;margin-top: 0;&quot;&gt;ğŸ® AIç­–ç•¥å¯¹æˆ˜é…ç½®&lt;/h3&gt;

    &lt;!-- æ¸¸æˆæ¨¡å¼é€‰æ‹© --&gt;
    &lt;div class=&quot;settings-section&quot;&gt;
        &lt;h3 class=&quot;section-title&quot; style=&quot;color: #FF5722;&quot;&gt;ğŸ¯ æ¸¸æˆæ¨¡å¼&lt;/h3&gt;
        &lt;select id=&quot;game_mode&quot; class=&quot;text_pole&quot; style=&quot;width: 100%; font-size: 14px;&quot;&gt;
            &lt;option value=&quot;universal&quot;&gt;é€šç”¨æ¨¡å¼ï¼ˆä¾èµ–ä¸–ç•Œä¹¦/é…’é¦†AIï¼‰&lt;/option&gt;
            &lt;option value=&quot;werewolf&quot;&gt;ç‹¼äººæ€æ¨¡å¼ï¼ˆå†…ç½®è§„åˆ™ï¼Œæ— éœ€ä¸–ç•Œä¹¦ï¼‰&lt;/option&gt;
        &lt;/select&gt;
        &lt;p class=&quot;section-description&quot;&gt;
            ğŸ’¡ &lt;strong&gt;é€šç”¨æ¨¡å¼&lt;/strong&gt;ï¼šç”±é…’é¦†AIï¼ˆä¸–ç•Œä¹¦ï¼‰å®šä¹‰è§„åˆ™ï¼ŒGMæ ¹æ®è§„åˆ™ä¸»æŒ&lt;br&gt;
            ğŸº &lt;strong&gt;ç‹¼äººæ€æ¨¡å¼&lt;/strong&gt;ï¼šæ‰©å±•å†…ç½®å®Œæ•´ç‹¼äººæ€è§„åˆ™ï¼Œè‡ªåŠ¨ç®¡ç†æ¸¸æˆæµç¨‹
        &lt;/p&gt;
    &lt;/div&gt;

    &lt;!-- GM è®¾ç½® --&gt;
    &lt;div id=&quot;gm_settings_container&quot;&gt;
        &lt;div class=&quot;settings-section&quot; id=&quot;gm_system_prompt_section&quot;&gt;
            &lt;h3 class=&quot;section-title&quot; style=&quot;color: #9C27B0;&quot;&gt;ğŸ­ GM ç³»ç»Ÿæç¤ºè¯&lt;/h3&gt;
            &lt;p class=&quot;section-description&quot;&gt;
                è¿™æ®µæç¤ºè¯ä¼šåœ¨æ¯æ¬¡è°ƒç”¨ GM æ—¶è‡ªåŠ¨é™„åŠ ï¼Œç”¨äºæ˜ç¡® GM çš„èº«ä»½å’Œä»»åŠ¡ã€‚
            &lt;/p&gt;
            &lt;textarea id=&quot;gm_system_prompt&quot; class=&quot;text_pole&quot; rows=&quot;6&quot; style=&quot;width: 100%; resize: vertical;&quot;&gt;ä½ æ˜¯ä¸€ä¸ªæ¸¸æˆä¸»æŒäººï¼ˆGMï¼‰ï¼Œè´Ÿè´£åè°ƒå¤šä¸ªAIç©å®¶è¿›è¡Œæ¸¸æˆã€‚

ä½ çš„èŒè´£ï¼š
1. ä¸¥æ ¼æ ¹æ®èŠå¤©è®°å½•ä¸­çš„æ¸¸æˆè§„åˆ™ä¸»æŒæ¸¸æˆ
2. ä½¿ç”¨ã€è½®åˆ°ï¼šç©å®¶åã€‘æ¥æŒ‡å®šæŸä¸ªç©å®¶å…¬å¼€è¡ŒåŠ¨
3. ä½¿ç”¨ã€ç§˜å¯†æŒ‡ç¤ºï¼šç©å®¶å|å†…å®¹ã€‘æ¥ç»™æŸä¸ªç©å®¶å‘é€ç§˜å¯†ä¿¡æ¯
4. ç»å¯¹ä¸è¦åç¦»å½“å‰æ¸¸æˆä¸»é¢˜ï¼Œä¸è¦å›ç­”æ— å…³é—®é¢˜&lt;/textarea&gt;
        &lt;/div&gt;

        &lt;div class=&quot;settings-section&quot;&gt;
            &lt;h3 class=&quot;section-title&quot; style=&quot;color: #4CAF50;&quot;&gt;ğŸ¤– GM &amp; è§£è¯´å‘˜ API é…ç½®&lt;/h3&gt;
            &lt;div id=&quot;commentator_section&quot; style=&quot;margin-bottom: 15px;&quot;&gt;
                &lt;label class=&quot;checkbox_label&quot;&gt;
                    &lt;input type=&quot;checkbox&quot; id=&quot;commentatorEnabled&quot; /&gt;
                    &lt;span&gt;å¯ç”¨AIè§£è¯´å‘˜ï¼ˆä»…ç‹¼äººæ€æ¨¡å¼ï¼‰&lt;/span&gt;
                &lt;/label&gt;
                &lt;small&gt;ä½¿ç”¨ä¸‹æ–¹APIé…ç½®ç”Ÿæˆæ¸¸æˆè§£è¯´ï¼Œå¢åŠ è§‚èµæ€§&lt;/small&gt;
                &lt;textarea 
                    id=&quot;commentatorStyle&quot; 
                    rows=&quot;3&quot; 
                    class=&quot;text_pole&quot;
                    style=&quot;width: 100%; margin-top: 5px;&quot;
                    placeholder=&quot;è§£è¯´é£æ ¼ï¼ˆé€‰å¡«ï¼‰ï¼šç•™ç©ºä½¿ç”¨é»˜è®¤æ¿€æƒ…é£æ ¼ã€‚æˆ–è‡ªå®šä¹‰ï¼šå¦‚'ä½ æ˜¯ä¸“ä¸šå†·é™çš„è§£è¯´å‘˜...'&quot;
                &gt;&lt;/textarea&gt;
            &lt;/div&gt;
            
            &lt;div style=&quot;display: flex; gap: 10px; margin-bottom: 10px;&quot;&gt;
                &lt;div style=&quot;flex: 1;&quot;&gt;
                    &lt;label&gt;API åœ°å€&lt;/label&gt;
                    &lt;input id=&quot;gm_api_url&quot; type=&quot;text&quot; class=&quot;text_pole&quot; style=&quot;width: 100%;&quot; placeholder=&quot;https://api.openai.com/v1&quot; /&gt;
                &lt;/div&gt;
                &lt;div style=&quot;flex: 1;&quot;&gt;
                    &lt;label&gt;
                        æ¨¡å‹
                        &lt;button id=&quot;fetch_gm_models&quot; class=&quot;menu_button&quot; style=&quot;padding: 2px 8px; margin-left: 5px; font-size: 11px;&quot;&gt;ğŸ”„ æ‹‰å–&lt;/button&gt;
                    &lt;/label&gt;
                    &lt;select id=&quot;gm_model&quot; class=&quot;text_pole&quot; style=&quot;width: 100%;&quot;&gt;&lt;/select&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div&gt;
                &lt;label&gt;API Key&lt;/label&gt;
                &lt;input id=&quot;gm_api_key&quot; type=&quot;password&quot; class=&quot;text_pole&quot; style=&quot;width: 100%;&quot; placeholder=&quot;sk-...&quot; /&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;!-- 6ä¸ªAIé…ç½® --&gt;
    &lt;div class=&quot;players-config&quot; id=&quot;players_config_container&quot;&gt;
        &lt;!-- Player configs will be generated by JS --&gt;
    &lt;/div&gt;
    
    &lt;button id=&quot;save_battle_settings&quot; class=&quot;menu_button&quot; style=&quot;width: 100%; padding: 12px; font-size: 16px; margin-top: 20px;&quot;&gt;ğŸ’¾ ä¿å­˜é…ç½®&lt;/button&gt;
&lt;/div&gt;

&lt;!-- Player Template --&gt;
&lt;template id=&quot;player_config_template&quot;&gt;
    &lt;div class=&quot;settings-section ai-player-config&quot;&gt;
        &lt;h4 style=&quot;margin-top: 0; color: var(--SmartThemeQuoteColor);&quot;&gt;ğŸ‘¤ ç©å®¶ {PLAYER_NUM}&lt;/h4&gt;
        &lt;div style=&quot;margin-bottom: 10px;&quot;&gt;
            &lt;label&gt;æ¸¸æˆä¸­çš„åç§°ï¼ˆGMä¼šç”¨è¿™ä¸ªåå­—ç§°å‘¼ï¼‰&lt;/label&gt;
            &lt;input type=&quot;text&quot; id=&quot;player{PLAYER_NUM}_name&quot; class=&quot;text_pole&quot; style=&quot;width: 100%;&quot;&gt;
        &lt;/div&gt;
        &lt;div style=&quot;margin-bottom: 10px;&quot;&gt;
            &lt;label&gt;API URL&lt;/label&gt;
            &lt;input type=&quot;text&quot; id=&quot;player{PLAYER_NUM}_api_url&quot; class=&quot;text_pole&quot; style=&quot;width: 100%;&quot;&gt;
        &lt;/div&gt;
        &lt;div style=&quot;margin-bottom: 10px;&quot;&gt;
            &lt;label&gt;API Key&lt;/label&gt;
            &lt;input type=&quot;password&quot; id=&quot;player{PLAYER_NUM}_api_key&quot; class=&quot;text_pole&quot; style=&quot;width: 100%;&quot;&gt;
        &lt;/div&gt;
        &lt;div style=&quot;margin-bottom: 10px;&quot;&gt;
            &lt;label&gt;æ¨¡å‹&lt;/label&gt;
            &lt;div style=&quot;display: flex; gap: 5px;&quot;&gt;
                &lt;select id=&quot;player{PLAYER_NUM}_model&quot; class=&quot;text_pole&quot; style=&quot;width: 100%;&quot;&gt;&lt;/select&gt;
                &lt;button id=&quot;fetch_player{PLAYER_NUM}_models&quot; class=&quot;menu_button&quot; title=&quot;æ‹‰å–æ¨¡å‹åˆ—è¡¨&quot;&gt;ğŸ”„&lt;/button&gt;
                &lt;button id=&quot;test_player{PLAYER_NUM}_api&quot; class=&quot;menu_button&quot; title=&quot;æµ‹è¯•APIè¿æ¥&quot;&gt;âœ“&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;details style=&quot;margin-top: 10px;&quot;&gt;
            &lt;summary style=&quot;cursor: pointer; color: var(--SmartThemeBodyColor); font-weight: bold;&quot;&gt;âš™ï¸ é«˜çº§ï¼šè‡ªå®šä¹‰äººæ ¼æç¤ºè¯ï¼ˆå¯é€‰ï¼‰&lt;/summary&gt;
            &lt;textarea id=&quot;player{PLAYER_NUM}_custom_prompt&quot; class=&quot;text_pole&quot; placeholder=&quot;ä¾‹å¦‚ï¼šä½ æ€§æ ¼è°¨æ…ï¼Œä¸è½»æ˜“ç›¸ä¿¡ä»–äºº...&quot; style=&quot;width: 100%; height: 80px; margin-top: 10px; resize: vertical;&quot;&gt;&lt;/textarea&gt;
        &lt;/details&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;style&gt;
    .settings-section {
        margin-bottom: 20px;
        padding: 15px;
        background: var(--black30a);
        border-radius: 8px;
    }
    .section-title {
        margin: 0 0 10px 0;
    }
    .section-description {
        font-size: 12px;
        color: #888;
        margin: 10px 0 0 0;
    }
&lt;/style&gt;
